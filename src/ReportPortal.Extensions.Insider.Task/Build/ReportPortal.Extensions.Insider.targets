<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <_InsiderRuntime Condition=" $(MSBuildRuntimeType) == 'Full' ">net472</_InsiderRuntime>
    <_InsiderRuntime Condition=" $(MSBuildRuntimeType) == 'Core' ">netstandard2.0</_InsiderRuntime>
  </PropertyGroup>
  
  <UsingTask TaskName="ReportPortal.Extensions.Insider.Task.InsiderTask" AssemblyFile="$(MSBuildThisFileDirectory)..\tasks\$(_InsiderRuntime)\ReportPortal.Extensions.Insider.Task.dll" />

  <Target Name="InsiderInstrumentalTask" AfterTargets="Build">
    <!--<InsiderTask TargetAssemblyPath="$(TargetPath)" />-->
    <Exec Command="dotnet ReportPortal.Extensions.Insider.Task.dll" WorkingDirectory="$(MSBuildThisFileDirectory)..\tasks" ConsoleToMSBuild="true">
      <Output TaskParameter="ConsoleOutput" PropertyName="OutputOfExec" />
    </Exec>
  </Target>

</Project>